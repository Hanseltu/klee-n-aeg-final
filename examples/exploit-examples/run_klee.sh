#!/bin/bash

rm -rf klee-*

# recompile first
#clang++-9 -w -g -emit-llvm -c function-pointer-test.cc
clang-9 -g -O0 -Xclang -disable-O0-optnone -w -emit-llvm -c t1.c

# change .bc to readable .ll
llvm-dis-9 t1.bc
#llvm-dis-9 function-pointer-test.bc

# execute klee
#klee malloc.bc 1
#klee --libc=uclibc function-pointer-test.bc
klee --write-cvcs -posix-runtime --libc=uclibc t1.bc
#../../../klee-offical/klee/build-new/bin/klee --libc=uclibc --posix-runtime malloc.bc 
#klee --write-cvcs  malloc.ll --sym-arg 3

#klee malloc.ll

